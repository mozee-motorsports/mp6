ARM GAS  /tmp/ccSdQ2xU.s 			page 1


   1              		.cpu cortex-m7
   2              		.arch armv7e-m
   3              		.fpu fpv5-d16
   4              		.eabi_attribute 28, 1
   5              		.eabi_attribute 20, 1
   6              		.eabi_attribute 21, 1
   7              		.eabi_attribute 23, 3
   8              		.eabi_attribute 24, 1
   9              		.eabi_attribute 25, 1
  10              		.eabi_attribute 26, 1
  11              		.eabi_attribute 30, 1
  12              		.eabi_attribute 34, 1
  13              		.eabi_attribute 18, 4
  14              		.file	"app_azure_rtos.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.file 1 "AZURE_RTOS/App/app_azure_rtos.c"
  19              		.section	.rodata.tx_application_define.str1.4,"aMS",%progbits,1
  20              		.align	2
  21              	.LC0:
  22 0000 54782041 		.ascii	"Tx App memory pool\000"
  22      7070206D 
  22      656D6F72 
  22      7920706F 
  22      6F6C00
  23              		.section	.text.tx_application_define,"ax",%progbits
  24              		.align	1
  25              		.global	tx_application_define
  26              		.syntax unified
  27              		.thumb
  28              		.thumb_func
  30              	tx_application_define:
  31              	.LVL0:
  32              	.LFB152:
   1:AZURE_RTOS/App/app_azure_rtos.c **** /* USER CODE BEGIN Header */
   2:AZURE_RTOS/App/app_azure_rtos.c **** /**
   3:AZURE_RTOS/App/app_azure_rtos.c ****   ******************************************************************************
   4:AZURE_RTOS/App/app_azure_rtos.c ****   * @file    app_azure_rtos.c
   5:AZURE_RTOS/App/app_azure_rtos.c ****   * @author  MCD Application Team
   6:AZURE_RTOS/App/app_azure_rtos.c ****   * @brief   app_azure_rtos application implementation file
   7:AZURE_RTOS/App/app_azure_rtos.c ****   ******************************************************************************
   8:AZURE_RTOS/App/app_azure_rtos.c ****   * @attention
   9:AZURE_RTOS/App/app_azure_rtos.c ****   *
  10:AZURE_RTOS/App/app_azure_rtos.c ****   * Copyright (c) 2020-2021 STMicroelectronics.
  11:AZURE_RTOS/App/app_azure_rtos.c ****   * All rights reserved.
  12:AZURE_RTOS/App/app_azure_rtos.c ****   *
  13:AZURE_RTOS/App/app_azure_rtos.c ****   * This software is licensed under terms that can be found in the LICENSE file
  14:AZURE_RTOS/App/app_azure_rtos.c ****   * in the root directory of this software component.
  15:AZURE_RTOS/App/app_azure_rtos.c ****   * If no LICENSE file comes with this software, it is provided AS-IS.
  16:AZURE_RTOS/App/app_azure_rtos.c ****   *
  17:AZURE_RTOS/App/app_azure_rtos.c ****   ******************************************************************************
  18:AZURE_RTOS/App/app_azure_rtos.c ****   */
  19:AZURE_RTOS/App/app_azure_rtos.c **** /* USER CODE END Header */
  20:AZURE_RTOS/App/app_azure_rtos.c **** 
  21:AZURE_RTOS/App/app_azure_rtos.c **** /* Includes ------------------------------------------------------------------*/
  22:AZURE_RTOS/App/app_azure_rtos.c **** 
ARM GAS  /tmp/ccSdQ2xU.s 			page 2


  23:AZURE_RTOS/App/app_azure_rtos.c **** #include "app_azure_rtos.h"
  24:AZURE_RTOS/App/app_azure_rtos.c **** #include "stm32h7xx.h"
  25:AZURE_RTOS/App/app_azure_rtos.c **** 
  26:AZURE_RTOS/App/app_azure_rtos.c **** /* Private includes ----------------------------------------------------------*/
  27:AZURE_RTOS/App/app_azure_rtos.c **** /* USER CODE BEGIN Includes */
  28:AZURE_RTOS/App/app_azure_rtos.c **** 
  29:AZURE_RTOS/App/app_azure_rtos.c **** /* USER CODE END Includes */
  30:AZURE_RTOS/App/app_azure_rtos.c **** 
  31:AZURE_RTOS/App/app_azure_rtos.c **** /* Private typedef -----------------------------------------------------------*/
  32:AZURE_RTOS/App/app_azure_rtos.c **** /* USER CODE BEGIN PTD */
  33:AZURE_RTOS/App/app_azure_rtos.c **** 
  34:AZURE_RTOS/App/app_azure_rtos.c **** /* USER CODE END PTD */
  35:AZURE_RTOS/App/app_azure_rtos.c **** 
  36:AZURE_RTOS/App/app_azure_rtos.c **** /* Private define ------------------------------------------------------------*/
  37:AZURE_RTOS/App/app_azure_rtos.c **** /* USER CODE BEGIN PD */
  38:AZURE_RTOS/App/app_azure_rtos.c **** 
  39:AZURE_RTOS/App/app_azure_rtos.c **** /* USER CODE END PD */
  40:AZURE_RTOS/App/app_azure_rtos.c **** 
  41:AZURE_RTOS/App/app_azure_rtos.c **** /* Private macro -------------------------------------------------------------*/
  42:AZURE_RTOS/App/app_azure_rtos.c **** /* USER CODE BEGIN PM */
  43:AZURE_RTOS/App/app_azure_rtos.c **** 
  44:AZURE_RTOS/App/app_azure_rtos.c **** /* USER CODE END PM */
  45:AZURE_RTOS/App/app_azure_rtos.c **** 
  46:AZURE_RTOS/App/app_azure_rtos.c **** /* Private variables ---------------------------------------------------------*/
  47:AZURE_RTOS/App/app_azure_rtos.c **** #if (USE_STATIC_ALLOCATION == 1)
  48:AZURE_RTOS/App/app_azure_rtos.c **** /* USER CODE BEGIN TX_Pool_Buffer */
  49:AZURE_RTOS/App/app_azure_rtos.c **** /* USER CODE END TX_Pool_Buffer */
  50:AZURE_RTOS/App/app_azure_rtos.c **** #if defined ( __ICCARM__ )
  51:AZURE_RTOS/App/app_azure_rtos.c **** #pragma data_alignment=4
  52:AZURE_RTOS/App/app_azure_rtos.c **** #endif
  53:AZURE_RTOS/App/app_azure_rtos.c **** __ALIGN_BEGIN static UCHAR tx_byte_pool_buffer[TX_APP_MEM_POOL_SIZE] __ALIGN_END;
  54:AZURE_RTOS/App/app_azure_rtos.c **** static TX_BYTE_POOL tx_app_byte_pool;
  55:AZURE_RTOS/App/app_azure_rtos.c **** 
  56:AZURE_RTOS/App/app_azure_rtos.c **** #endif
  57:AZURE_RTOS/App/app_azure_rtos.c **** 
  58:AZURE_RTOS/App/app_azure_rtos.c **** /* USER CODE BEGIN PV */
  59:AZURE_RTOS/App/app_azure_rtos.c **** 
  60:AZURE_RTOS/App/app_azure_rtos.c **** /* USER CODE END PV */
  61:AZURE_RTOS/App/app_azure_rtos.c **** 
  62:AZURE_RTOS/App/app_azure_rtos.c **** /* Private function prototypes -----------------------------------------------*/
  63:AZURE_RTOS/App/app_azure_rtos.c **** /* USER CODE BEGIN PFP */
  64:AZURE_RTOS/App/app_azure_rtos.c **** 
  65:AZURE_RTOS/App/app_azure_rtos.c **** /* USER CODE END PFP */
  66:AZURE_RTOS/App/app_azure_rtos.c **** 
  67:AZURE_RTOS/App/app_azure_rtos.c **** /**
  68:AZURE_RTOS/App/app_azure_rtos.c ****   * @brief  Define the initial system.
  69:AZURE_RTOS/App/app_azure_rtos.c ****   * @param  first_unused_memory : Pointer to the first unused memory
  70:AZURE_RTOS/App/app_azure_rtos.c ****   * @retval None
  71:AZURE_RTOS/App/app_azure_rtos.c ****   */
  72:AZURE_RTOS/App/app_azure_rtos.c **** VOID tx_application_define(VOID *first_unused_memory)
  73:AZURE_RTOS/App/app_azure_rtos.c **** {
  33              		.loc 1 73 1 view -0
  34              		.cfi_startproc
  35              		@ args = 0, pretend = 0, frame = 0
  36              		@ frame_needed = 0, uses_anonymous_args = 0
  37              		.loc 1 73 1 is_stmt 0 view .LVU1
  38 0000 00B5     		push	{lr}
ARM GAS  /tmp/ccSdQ2xU.s 			page 3


  39              	.LCFI0:
  40              		.cfi_def_cfa_offset 4
  41              		.cfi_offset 14, -4
  42 0002 83B0     		sub	sp, sp, #12
  43              	.LCFI1:
  44              		.cfi_def_cfa_offset 16
  74:AZURE_RTOS/App/app_azure_rtos.c ****   /* USER CODE BEGIN  tx_application_define_1*/
  75:AZURE_RTOS/App/app_azure_rtos.c **** 
  76:AZURE_RTOS/App/app_azure_rtos.c ****   /* USER CODE END  tx_application_define_1 */
  77:AZURE_RTOS/App/app_azure_rtos.c **** #if (USE_STATIC_ALLOCATION == 1)
  78:AZURE_RTOS/App/app_azure_rtos.c ****   UINT status = TX_SUCCESS;
  45              		.loc 1 78 3 is_stmt 1 view .LVU2
  46              	.LVL1:
  79:AZURE_RTOS/App/app_azure_rtos.c ****   VOID *memory_ptr;
  47              		.loc 1 79 3 view .LVU3
  80:AZURE_RTOS/App/app_azure_rtos.c **** 
  81:AZURE_RTOS/App/app_azure_rtos.c ****   if (tx_byte_pool_create(&tx_app_byte_pool, "Tx App memory pool", tx_byte_pool_buffer, TX_APP_MEM_
  48              		.loc 1 81 3 view .LVU4
  49              		.loc 1 81 7 is_stmt 0 view .LVU5
  50 0004 3423     		movs	r3, #52
  51 0006 0093     		str	r3, [sp]
  52 0008 4FF48063 		mov	r3, #1024
  53 000c 074A     		ldr	r2, .L6
  54 000e 0849     		ldr	r1, .L6+4
  55 0010 0848     		ldr	r0, .L6+8
  56              	.LVL2:
  57              		.loc 1 81 7 view .LVU6
  58 0012 FFF7FEFF 		bl	_txe_byte_pool_create
  59              	.LVL3:
  60              		.loc 1 81 6 discriminator 1 view .LVU7
  61 0016 10B1     		cbz	r0, .L5
  62              	.LVL4:
  63              	.L1:
  82:AZURE_RTOS/App/app_azure_rtos.c ****   {
  83:AZURE_RTOS/App/app_azure_rtos.c ****     /* USER CODE BEGIN TX_Byte_Pool_Error */
  84:AZURE_RTOS/App/app_azure_rtos.c **** 
  85:AZURE_RTOS/App/app_azure_rtos.c ****     /* USER CODE END TX_Byte_Pool_Error */
  86:AZURE_RTOS/App/app_azure_rtos.c ****   }
  87:AZURE_RTOS/App/app_azure_rtos.c ****   else
  88:AZURE_RTOS/App/app_azure_rtos.c ****   {
  89:AZURE_RTOS/App/app_azure_rtos.c ****     /* USER CODE BEGIN TX_Byte_Pool_Success */
  90:AZURE_RTOS/App/app_azure_rtos.c **** 
  91:AZURE_RTOS/App/app_azure_rtos.c ****     /* USER CODE END TX_Byte_Pool_Success */
  92:AZURE_RTOS/App/app_azure_rtos.c **** 
  93:AZURE_RTOS/App/app_azure_rtos.c ****     memory_ptr = (VOID *)&tx_app_byte_pool;
  94:AZURE_RTOS/App/app_azure_rtos.c ****     status = App_ThreadX_Init(memory_ptr);
  95:AZURE_RTOS/App/app_azure_rtos.c ****     if (status != TX_SUCCESS)
  96:AZURE_RTOS/App/app_azure_rtos.c ****     {
  97:AZURE_RTOS/App/app_azure_rtos.c ****       /* USER CODE BEGIN  App_ThreadX_Init_Error */
  98:AZURE_RTOS/App/app_azure_rtos.c ****       while(1)
  99:AZURE_RTOS/App/app_azure_rtos.c ****       {
 100:AZURE_RTOS/App/app_azure_rtos.c ****       }
 101:AZURE_RTOS/App/app_azure_rtos.c ****       /* USER CODE END  App_ThreadX_Init_Error */
 102:AZURE_RTOS/App/app_azure_rtos.c ****     }
 103:AZURE_RTOS/App/app_azure_rtos.c **** 
 104:AZURE_RTOS/App/app_azure_rtos.c ****     /* USER CODE BEGIN  App_ThreadX_Init_Success */
 105:AZURE_RTOS/App/app_azure_rtos.c **** 
ARM GAS  /tmp/ccSdQ2xU.s 			page 4


 106:AZURE_RTOS/App/app_azure_rtos.c ****     /* USER CODE END  App_ThreadX_Init_Success */
 107:AZURE_RTOS/App/app_azure_rtos.c **** 
 108:AZURE_RTOS/App/app_azure_rtos.c ****   }
 109:AZURE_RTOS/App/app_azure_rtos.c **** 
 110:AZURE_RTOS/App/app_azure_rtos.c **** #else
 111:AZURE_RTOS/App/app_azure_rtos.c ****   /*
 112:AZURE_RTOS/App/app_azure_rtos.c ****    * Using dynamic memory allocation requires to apply some changes to the linker file.
 113:AZURE_RTOS/App/app_azure_rtos.c ****    * ThreadX needs to pass a pointer to the first free memory location in RAM to the tx_application
 114:AZURE_RTOS/App/app_azure_rtos.c ****    * using the "first_unused_memory" argument.
 115:AZURE_RTOS/App/app_azure_rtos.c ****    * This require changes in the linker files to expose this memory location.
 116:AZURE_RTOS/App/app_azure_rtos.c ****    * For EWARM add the following section into the .icf file:
 117:AZURE_RTOS/App/app_azure_rtos.c ****        place in RAM_region    { last section FREE_MEM };
 118:AZURE_RTOS/App/app_azure_rtos.c ****    * For MDK-ARM
 119:AZURE_RTOS/App/app_azure_rtos.c ****        - either define the RW_IRAM1 region in the ".sct" file
 120:AZURE_RTOS/App/app_azure_rtos.c ****        - or modify the line below in "tx_initialize_low_level.S to match the memory region being us
 121:AZURE_RTOS/App/app_azure_rtos.c ****           LDR r1, =|Image$$RW_IRAM1$$ZI$$Limit|
 122:AZURE_RTOS/App/app_azure_rtos.c **** 
 123:AZURE_RTOS/App/app_azure_rtos.c ****    * For STM32CubeIDE add the following section into the .ld file:
 124:AZURE_RTOS/App/app_azure_rtos.c ****        ._threadx_heap :
 125:AZURE_RTOS/App/app_azure_rtos.c ****          {
 126:AZURE_RTOS/App/app_azure_rtos.c ****             . = ALIGN(8);
 127:AZURE_RTOS/App/app_azure_rtos.c ****             __RAM_segment_used_end__ = .;
 128:AZURE_RTOS/App/app_azure_rtos.c ****             . = . + 64K;
 129:AZURE_RTOS/App/app_azure_rtos.c ****             . = ALIGN(8);
 130:AZURE_RTOS/App/app_azure_rtos.c ****           } >RAM_D1 AT> RAM_D1
 131:AZURE_RTOS/App/app_azure_rtos.c ****       * The simplest way to provide memory for ThreadX is to define a new section, see ._threadx_he
 132:AZURE_RTOS/App/app_azure_rtos.c ****       * In the example above the ThreadX heap size is set to 64KBytes.
 133:AZURE_RTOS/App/app_azure_rtos.c ****       * The ._threadx_heap must be located between the .bss and the ._user_heap_stack sections in t
 134:AZURE_RTOS/App/app_azure_rtos.c ****       * Caution: Make sure that ThreadX does not need more than the provided heap memory (64KBytes 
 135:AZURE_RTOS/App/app_azure_rtos.c ****       * Read more in STM32CubeIDE User Guide, chapter: "Linker script".
 136:AZURE_RTOS/App/app_azure_rtos.c **** 
 137:AZURE_RTOS/App/app_azure_rtos.c ****    * The "tx_initialize_low_level.S" should be also modified to enable the "USE_DYNAMIC_MEMORY_ALLO
 138:AZURE_RTOS/App/app_azure_rtos.c ****    */
 139:AZURE_RTOS/App/app_azure_rtos.c **** 
 140:AZURE_RTOS/App/app_azure_rtos.c ****   /* USER CODE BEGIN DYNAMIC_MEM_ALLOC */
 141:AZURE_RTOS/App/app_azure_rtos.c ****   (void)first_unused_memory;
 142:AZURE_RTOS/App/app_azure_rtos.c ****   /* USER CODE END DYNAMIC_MEM_ALLOC */
 143:AZURE_RTOS/App/app_azure_rtos.c **** #endif
 144:AZURE_RTOS/App/app_azure_rtos.c **** 
 145:AZURE_RTOS/App/app_azure_rtos.c **** }
  64              		.loc 1 145 1 view .LVU8
  65 0018 03B0     		add	sp, sp, #12
  66              	.LCFI2:
  67              		.cfi_remember_state
  68              		.cfi_def_cfa_offset 4
  69              		@ sp needed
  70 001a 5DF804FB 		ldr	pc, [sp], #4
  71              	.LVL5:
  72              	.L5:
  73              	.LCFI3:
  74              		.cfi_restore_state
  93:AZURE_RTOS/App/app_azure_rtos.c ****     status = App_ThreadX_Init(memory_ptr);
  75              		.loc 1 93 5 is_stmt 1 view .LVU9
  94:AZURE_RTOS/App/app_azure_rtos.c ****     if (status != TX_SUCCESS)
  76              		.loc 1 94 5 view .LVU10
  94:AZURE_RTOS/App/app_azure_rtos.c ****     if (status != TX_SUCCESS)
  77              		.loc 1 94 14 is_stmt 0 view .LVU11
ARM GAS  /tmp/ccSdQ2xU.s 			page 5


  78 001e 0548     		ldr	r0, .L6+8
  79 0020 FFF7FEFF 		bl	App_ThreadX_Init
  80              	.LVL6:
  95:AZURE_RTOS/App/app_azure_rtos.c ****     {
  81              		.loc 1 95 5 is_stmt 1 view .LVU12
  95:AZURE_RTOS/App/app_azure_rtos.c ****     {
  82              		.loc 1 95 8 is_stmt 0 view .LVU13
  83 0024 0028     		cmp	r0, #0
  84 0026 F7D0     		beq	.L1
  85              	.L3:
  98:AZURE_RTOS/App/app_azure_rtos.c ****       {
  86              		.loc 1 98 7 is_stmt 1 view .LVU14
 100:AZURE_RTOS/App/app_azure_rtos.c ****       /* USER CODE END  App_ThreadX_Init_Error */
  87              		.loc 1 100 7 view .LVU15
  98:AZURE_RTOS/App/app_azure_rtos.c ****       {
  88              		.loc 1 98 12 view .LVU16
  89 0028 FEE7     		b	.L3
  90              	.L7:
  91 002a 00BF     		.align	2
  92              	.L6:
  93 002c 00000000 		.word	tx_byte_pool_buffer
  94 0030 00000000 		.word	.LC0
  95 0034 00000000 		.word	tx_app_byte_pool
  96              		.cfi_endproc
  97              	.LFE152:
  99              		.section	.bss.tx_app_byte_pool,"aw",%nobits
 100              		.align	2
 103              	tx_app_byte_pool:
 104 0000 00000000 		.space	52
 104      00000000 
 104      00000000 
 104      00000000 
 104      00000000 
 105              		.section	.bss.tx_byte_pool_buffer,"aw",%nobits
 106              		.align	2
 109              	tx_byte_pool_buffer:
 110 0000 00000000 		.space	1024
 110      00000000 
 110      00000000 
 110      00000000 
 110      00000000 
 111              		.text
 112              	.Letext0:
 113              		.file 2 "Middlewares/ST/threadx/ports/cortex_m7/gnu/inc/tx_port.h"
 114              		.file 3 "Middlewares/ST/threadx/common/inc/tx_api.h"
 115              		.file 4 "Core/Inc/app_threadx.h"
ARM GAS  /tmp/ccSdQ2xU.s 			page 6


DEFINED SYMBOLS
                            *ABS*:00000000 app_azure_rtos.c
     /tmp/ccSdQ2xU.s:20     .rodata.tx_application_define.str1.4:00000000 $d
     /tmp/ccSdQ2xU.s:24     .text.tx_application_define:00000000 $t
     /tmp/ccSdQ2xU.s:30     .text.tx_application_define:00000000 tx_application_define
     /tmp/ccSdQ2xU.s:93     .text.tx_application_define:0000002c $d
     /tmp/ccSdQ2xU.s:109    .bss.tx_byte_pool_buffer:00000000 tx_byte_pool_buffer
     /tmp/ccSdQ2xU.s:103    .bss.tx_app_byte_pool:00000000 tx_app_byte_pool
     /tmp/ccSdQ2xU.s:100    .bss.tx_app_byte_pool:00000000 $d
     /tmp/ccSdQ2xU.s:106    .bss.tx_byte_pool_buffer:00000000 $d

UNDEFINED SYMBOLS
_txe_byte_pool_create
App_ThreadX_Init
